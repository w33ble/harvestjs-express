<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Express, Part 1</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

        <link rel="stylesheet" href="/harvestjs-express/vendor/bootstrap/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="/harvestjs-express/css/main.css">
        <script src="/harvestjs-express/vendor/modernizr/modernizr.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->
        <div id="content"><h1>Your First View</h1><p>Now you have a route to pass information about yourself with requests to <code>/me</code>, but while passing JSON data is super useful for building an API, you might find presenting this information as HTML more useful, so let&#39;s see how that works.</p>
<p>To get you started, I&#39;ve already created a view for you to use. Download <a href="../views.zip">views.zip</a>, unzip it and replace the existing <code>views</code> folder in your project with the one from the zip file. You should now see <code>index.ejs</code>, <code>me.ejs</code> and an <code>elements</code> folder containing <code>header.ejs</code> and <code>footer.ejs</code>.</p>
<p>You could probably conclude from the filenames that these templates are in <code>ejs</code>, a markup language written in and for javascript, by the creator of express no less. You&#39;ll find a quick crash course in ejs below. Covering much of ejs is outside the scope of this course, but it&#39;s pretty easy to use. We&#39;ll move on, but if you care to read further you can check out the <a href="https://github.com/visionmedia/ejs">github page</a>.</p>
<hr>

<p>Before you create a new view to handle the presentation of our information, take a quick look at <code>views/index.ejs</code> to see what&#39;s going on there.</p>
<p>Notice the use of <code>&lt;%= title %&gt;</code> in this template. This is how ejs outputs variables. The <code>&lt;%= %&gt;</code> syntax (note the <code>=</code>) will cause any information passed in to be HTML escaped. This is useful for preventing cross-site scripting issues, but I digress.</p>
<p>Now If you take a look at <code>routes/index.js</code>. You may have noticed a few extra things going on here. Let&#39;s run through the important bits.</p>
<ul>
<li>It&#39;s using <code>res.render</code> instead of <code>res.send</code>. This is how you tell express to <em>render</em> a view, instead telling to simply <em>send</em> information. The first parameter of the call to <code>res.render</code> is the name of the view file without the ejs extension, starting from the <code>views</code> path, as defined in <code>app.js</code> (on or near line 16).</li>
<li><code>res.render</code> is being given a second parameter here as well. This is an object literal of the information you want to pass to the template. Here, the object has a key of <code>title</code>, which, as you saw, is being used in the view.</li>
</ul>
<hr>

<p>It&#39;s time to update that callback in the <code>/me</code> route in <code>app.js</code>. Use <code>res.render</code> to render the <code>me</code> view and pass it the <code>myself</code> object.</p>
<p>Once the route is done, open <a href="http://localhost:3000/me"><a href="http://localhost:3000/me">http://localhost:3000/me</a></a> in your browser. You should see the view rendered as HTML, but you won&#39;t see your information yet since the view isn&#39;t using it. Let&#39;s fix that!</p>
<p>Open <code>views/me.ejs</code> and take a look at what&#39;s there. You should notice that it&#39;s pretty similar to what was in <code>views/index.ejs</code>, only I&#39;ve changed some of the content. Edit this file to replace <em>NAME</em> and <em>AGE</em> with the proper keys from the <code>myself</code> object that you passed to the view. Remember the <code>&lt;%= %&gt;</code> syntax, and note that the variable names are case-sensitive.</p>
<p>Lastly, reload <a href="http://localhost:3000/me"><a href="http://localhost:3000/me">http://localhost:3000/me</a></a> in your browser and check out your handwork, then move on to the next lesson.</p>
<a href="/harvestjs-express/">Back to the index</a></div>

        <!--<script src="/harvestjs-express/vendor/jquery/jquery.min.js"></script>
        <script src="/harvestjs-express/vendor/bootstrap/dist/js/bootstrap.min.js"></script>-->
        <script src="/harvestjs-express/js/plugins.js"></script>
        <script src="/harvestjs-express/js/main.js"></script>
        


        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            /*
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X');ga('send','pageview');
            */
        </script>
    </body>
</html>
